<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>alps</title>
    <link rel="icon" href="../icon.ico">
    <link href="../js/js-parsons/parsons.css" rel="stylesheet" />
    <link href="../js/js-parsons/lib/prettify.css" rel="stylesheet" />
    <script src="../js/js-parsons/lib/prettify.js"></script>
    <script src="../js/js-parsons/lib/jquery.min.js"></script>
    <script src="../js/js-parsons/lib/jquery-ui.min.js"></script>
    <script src="../js/js-parsons/lib/jquery.ui.touch-punch.min.js"></script>
    <script src="../js/js-parsons/lib/underscore-min.js"></script>
    <script src="../js/js-deflate/rawdeflate.js"></script>
    <script src="../js/js-deflate/rawinflate.js"></script>
    <script src="../js/js-parsons/lib/lis.js"></script>
    <script src="../js/js-parsons/parsons.js"></script>
    <script src="../js/common.js"></script>
</head>
<body>
    <h2>Puzzle</h2>
    <p>ドラッグ＆ドロップで左から右へコードを並べ替えてプログラムを完成させよう！</p>

    <div id="sortableTrash" class="sortable-code"></div>
    <div id="sortable" class="sortable-code"></div>
    <div style="clear:both;"></div>
    <p>
        <a href="#" id="newInstanceLink">【やり直し】</a>
        <a href="#" id="feedbackLink">【回答確認】</a>
    </p>
    <script>
    var initial = query2code();

    function displayErrors(fb) {
        if(fb.errors.length > 0) {
            alert(fb.errors[0]);
        }
    } 

    $(document).ready(function(){
        var parson = new ParsonsWidget({
            'sortableId': 'sortable',
            'trashId': 'sortableTrash',
            'max_wrong_lines': 1,
            'feedback_cb' : displayErrors
        });
        parson.init(initial);
        parson.shuffleLines();
        $("#newInstanceLink").click(function(event){
            event.preventDefault();
            parson.shuffleLines();
        });
        $("#feedbackLink").click(function(event){
            event.preventDefault();
            parson.getFeedback();
        });
    });
    </script>
</body>
</html>
